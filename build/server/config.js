// Generated by CoffeeScript 1.7.1
var DAVServer, americano;

americano = require('americano');

DAVServer = require('./davserver');

module.exports = {
  common: {
    set: {
      'view engine': 'jade',
      views: './server/views'
    },
    use: [
      americano["static"](__dirname + '/../client/public', {
        maxAge: 86400000
      }), americano.bodyParser({
        keepExtensions: true
      }), americano.logger('dev'), americano.errorHandler({
        dumpExceptions: true,
        showStack: true
      }), function(req, res, next) {
        if (req.url.indexOf('/public') !== 0) {
          return next(null);
        }
        req.url = req.url.replace('/public', '/public/webdav');
        return DAVServer.exec(req, res);
      }
    ]
  },
  development: [americano.logger('dev')],
  production: [americano.logger('short')],
  plugins: ['americano-cozy']
};
